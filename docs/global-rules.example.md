# OpenCode å¼€å‘è§„èŒƒ v3.1

> å¼€å‘è§„èŒƒã€å·¥å…·ä½¿ç”¨æŒ‡å—ã€å·¥ä½œæµç¨‹ã€‚èº«ä»½å®šä¹‰è§ `~/.config/opencode/AGENTS.md`

---

## 1. ç¼–ç è§„èŒƒ

### 1.1 å‘½åè§„èŒƒ

| è¯­è¨€   | å˜é‡/å±æ€§        | å‡½æ•°/æ–¹æ³•        | ç±»å‹/ç±»          | å¸¸é‡             |
| ------ | ---------------- | ---------------- | ---------------- | ---------------- |
| Swift  | `lowerCamelCase` | `lowerCamelCase` | `UpperCamelCase` | `lowerCamelCase` |
| TS/JS  | `lowerCamelCase` | `lowerCamelCase` | `UpperCamelCase` | `UPPER_SNAKE`    |
| Python | `snake_case`     | `snake_case`     | `UpperCamelCase` | `UPPER_SNAKE`    |

**åŸåˆ™**ï¼š
- æè¿°æ€§å‘½åï¼Œé¿å…æ— æ„ä¹‰ç¼©å†™
- åŒä¸€æ¦‚å¿µç”¨åŒä¸€è¯æ±‡ï¼ˆ`fetch`/`get`/`load` é€‰ä¸€ä¸ªåšæŒï¼‰
- å¾ªç¯å˜é‡å¯çŸ­ï¼ˆ`i`ï¼‰ï¼Œå…¬å¼€ API å¿…é¡»è¯¦å°½

### 1.2 ä»£ç é£æ ¼

- **ç®€æ´**ï¼šçº¿æ€§é€»è¾‘ > åµŒå¥—ï¼Œå¤ç”¨ 3 æ¬¡ä»¥ä¸Šæ‰æŠ½è±¡
- **ç°ä»£**ï¼šSwift 6+ã€ES2022+ã€Python 3.12+
- **ç±»å‹**ï¼šå¿…è¦å¤„å£°æ˜ç±»å‹ï¼Œé¿å… `any`
- **æ³¨é‡Š**ï¼šè§£é‡Š Why è€Œé Whatï¼Œå¤æ‚é€»è¾‘å¿…é¡»æ³¨é‡Š

### 1.3 æ–‡ä»¶ç»„ç»‡

| ç±»å‹      | Swift               | TS/JS              |
| --------- | ------------------- | ------------------ |
| View      | `XxxView.swift`     | `XxxPage.tsx`      |
| ViewModel | `XxxViewModel.swift`| `useXxx.ts`        |
| Model     | `Xxx.swift`         | `xxx.types.ts`     |
| Service   | `XxxService.swift`  | `xxxService.ts`    |
| Extension | `Xxx+Yyy.swift`     | `xxx.utils.ts`     |

---

## 2. Swift/iOS è§„èŒƒ

### 2.1 è¯­æ³•åå¥½

```swift
// âœ… æ¨è
func fetchUser() async throws -> User { ... }
@Observable class ViewModel { ... }

// âŒ é¿å…
func fetchUser(completion: @escaping (Result<User, Error>) -> Void) { ... }
class ViewModel: ObservableObject { ... }  // iOS 17 ä»¥ä¸‹å…¼å®¹æ—¶å¯ç”¨
```

### 2.2 æ¶æ„æ¨¡å¼

```
App/
â”œâ”€â”€ Core/           # ä¸šåŠ¡é€»è¾‘ã€é¢†åŸŸæ¨¡å‹
â”œâ”€â”€ Data/           # ç½‘ç»œã€æŒä¹…åŒ–ã€Repository
â”œâ”€â”€ Features/       # åŠŸèƒ½æ¨¡å—ï¼ˆæŒ‰ä¸šåŠ¡åˆ’åˆ†ï¼‰
â”‚   â”œâ”€â”€ Auth/
â”‚   â”œâ”€â”€ Home/
â”‚   â””â”€â”€ Settings/
â””â”€â”€ Shared/         # é€šç”¨ç»„ä»¶ã€æ‰©å±•ã€å·¥å…·
```

- **MVVM + @Observable**ï¼šView â†” ViewModel â†” Model
- **ä¾èµ–æ³¨å…¥**ï¼š`@Environment` æˆ–åˆå§‹åŒ–å™¨

### 2.3 å®‰å…¨ç¼–ç 

```swift
// âœ… å®‰å…¨è§£åŒ…
guard let user = user else { return }
if let name = user.name { ... }

// âœ… å¼±å¼•ç”¨é˜²å¾ªç¯
Task { [weak self] in
    await self?.doSomething()
}

// âŒ ç¦æ­¢å¼ºåˆ¶è§£åŒ…ï¼ˆé™¤é 100% ç¡®å®šï¼‰
let user = user!
```

### 2.4 SwiftUI æœ€ä½³å®è·µ

- `LazyVStack`/`LazyHStack` å¤„ç†é•¿åˆ—è¡¨
- é¿å…åœ¨ `body` ä¸­å¤æ‚è®¡ç®—
- `@ViewBuilder` æŠ½å–é‡å¤è§†å›¾é€»è¾‘
- éµå¾ª HIGï¼ˆé—´è· 8pt å€æ•°ã€ç³»ç»Ÿé¢œè‰²ï¼‰

### 2.5 ä»£ç ç»“æ„

```swift
// MARK: - Properties
// MARK: - Lifecycle
// MARK: - Public Methods
// MARK: - Private Methods
// MARK: - Actions
```

---

## 3. å·¥å…·ä½¿ç”¨æŒ‡å—

### 3.1 MCP å·¥å…·

| MCP                   | çŠ¶æ€ | ç”¨é€”         | ä½¿ç”¨åœºæ™¯                   |
| --------------------- | ---- | ------------ | -------------------------- |
| `ace-tool`            | âœ…   | ä»£ç è¯­ä¹‰æœç´¢ | æŸ¥æ‰¾å‡½æ•°ã€ç±»ã€ç†è§£ä»£ç ç»“æ„ |
| `context7`            | âœ…   | å®˜æ–¹åº“æ–‡æ¡£   | æŸ¥ Swift/SwiftUI/Combine   |
| `filesystem`          | âœ…   | æ–‡ä»¶æ“ä½œ     | è¯»å†™ ~/ ç›®å½•ä¸‹çš„æ–‡ä»¶       |
| `github`              | âœ…   | GitHub API   | åˆ›å»º PRã€æŸ¥ Issue          |
| `sequential-thinking` | âœ…   | åˆ†æ­¥æ¨ç†     | å¤æ‚é—®é¢˜åˆ†è§£               |
| `memory`              | âœ…   | æŒä¹…è®°å¿†     | è·¨ Session ä¿å­˜ä¿¡æ¯        |
| `grep_app`            | âœ…   | GitHub ä»£ç æœç´¢ | æŸ¥æ‰¾å¼€æºå®ç°ç¤ºä¾‹        |

**ä¼˜å…ˆçº§**ï¼š
1. æœç´¢ä»£ç  â†’ `ace-tool`ï¼ˆè¯­ä¹‰æœç´¢ï¼Œä¼˜äº grepï¼‰
2. æŸ¥ API æ–‡æ¡£ â†’ `context7`ï¼ˆå®˜æ–¹æ–‡æ¡£ï¼‰
3. GitHub æ“ä½œ â†’ `github` MCPï¼ˆä¼˜äº `gh` å‘½ä»¤ï¼‰
4. å¤æ‚æ¨ç† â†’ `sequential-thinking`ï¼ˆåˆ†æ­¥æ€è€ƒï¼‰
5. è®°ä½ä¿¡æ¯ â†’ `memory`ï¼ˆè·¨ä¼šè¯è®°å¿†ï¼‰

### 3.2 Agent é€‰æ‹©

#### æŒ‰ä»»åŠ¡ç±»å‹

| ä»»åŠ¡ç±»å‹     | é¦–é€‰ Agent | å¤‡é€‰ Agent     | æ¨¡å‹             | è¯´æ˜                    |
| ------------ | ---------- | -------------- | ---------------- | ----------------------- |
| æ—¥å¸¸å¯¹è¯     | `@0m0`     | -              | Sonnet 4.5       | ç®±å®äººæ ¼ï¼ˆé»˜è®¤ï¼‰        |
| è°ƒè¯•/å´©æºƒ    | `@debug`   | `@debug2`      | GPT 5.2          | æ·±åº¦è°ƒè¯•                |
| SwiftUI ç•Œé¢ | `@gemini`  | `@gemini2`     | Gemini 3 Pro     | UI å¼€å‘                 |
| Swift æ¶æ„   | `@swift`   | `@swift2`      | Sonnet 4.5       | æ¶æ„è®¾è®¡                |
| æ¶æ„å®¡æŸ¥     | `@arch`    | `@arch2`       | Opus 4.5         | æ·±åº¦å®¡æŸ¥ï¼ˆè‡ªå®šä¹‰ï¼‰      |
| AI ç”Ÿå›¾      | `@image`   | `@local-img`   | Gemini 3 Image   | å›¾åƒç”Ÿæˆ                |
| Apple æ–‡æ¡£   | `@docs`    | `@librarian`   | GLM 4.7          | æ–‡æ¡£æŸ¥è¯¢                |
| ä»£ç æœç´¢     | `@search`  | `@explore`     | Grok             | ä»£ç æ¢ç´¢ï¼ˆè‡ªå®šä¹‰ï¼‰      |
| å¿«é€Ÿé—®ç­”     | `@free`    | -              | GLM 4.7 (å…è´¹)   | å…è´¹æ¨¡å‹                |
| æ·±åº¦æ€è€ƒ     | `@think-o` | `@think-s`     | Opus/Sonnet      | 1API Thinking           |
| æœ¬åœ°æ¨¡å‹     | `@local-*` | -              | 2API             | æœ¬åœ°åä»£                |

**æ³¨æ„**ï¼š`@oracle`, `@explore`, `@librarian`, `@frontend-ui-ux-engineer` æ˜¯ oh-my-opencode å†…ç½® agentsã€‚

#### æŒ‰æˆæœ¬ï¼ˆä»ä½åˆ°é«˜ï¼‰

```
å…è´¹: @free â†’ @explore
æœ¬åœ°: @think-s â†’ @think-o â†’ @local-g
AG:   @gemini/@swift â†’ @oracle
å®˜æ–¹: @gemini2/@swift2 â†’ @oracle2 â†’ @debug2
```

### 3.3 Formattersï¼ˆè‡ªåŠ¨æ ¼å¼åŒ–ï¼‰

| è¯­è¨€       | å·¥å…·        | è§¦å‘æ—¶æœº                  |
| ---------- | ----------- | ------------------------- |
| Swift      | SwiftFormat | ä¿å­˜ .swift æ–‡ä»¶æ—¶        |
| TS/JS/JSON | Prettier    | ä¿å­˜ .ts/.tsx/.js/.jsx æ—¶ |
| Python     | Ruff        | ä¿å­˜ .py æ–‡ä»¶æ—¶           |

### 3.4 Skills å‘½ä»¤

| å‘½ä»¤              | åŠŸèƒ½                           | è§¦å‘æ—¶æœº               |
| ----------------- | ------------------------------ | ---------------------- |
| `/commit`         | åˆ†æå˜æ›´ + ç”Ÿæˆæäº¤ä¿¡æ¯ + æäº¤ | å®Œæˆä¸€ä¸ªåŠŸèƒ½ç‚¹         |
| `/commit-push-pr` | æäº¤ + æ¨é€ + åˆ›å»º PR          | å‡†å¤‡æäº¤å®¡æŸ¥           |
| `/clean_gone`     | æ¸…ç†å·²åˆ é™¤çš„è¿œç¨‹åˆ†æ”¯           | å®šæœŸæ¸…ç†               |
| `/test`           | è¿è¡Œæµ‹è¯•ï¼Œå¤±è´¥è‡ªåŠ¨ä¿®å¤         | å¼€å‘å®ŒæˆåéªŒè¯         |
| `/translate`      | ç¿»è¯‘ä»£ç æ³¨é‡Š/æ–‡æ¡£ (è‹±â†”ä¸­)      | éœ€è¦ç¿»è¯‘æ—¶             |
| `/swift-check`    | SwiftFormat + SwiftLint + Build| æäº¤å‰æ£€æŸ¥             |
| `/xcode-build`    | Xcode é¡¹ç›®æ„å»º                 | æ„å»ºéªŒè¯               |
| `/simctl`         | æ¨¡æ‹Ÿå™¨æ§åˆ¶ (æˆªå›¾/å½•å±/æ¨é€ç­‰)  | è°ƒè¯•æ¨¡æ‹Ÿå™¨æ—¶           |

### 3.5 å¿«æ·é”®

| å¿«æ·é”®         | åŠŸèƒ½               |
| -------------- | ------------------ |
| `Enter`        | æäº¤æ¶ˆæ¯           |
| `Shift+Enter`  | æ¢è¡Œ               |
| `Escape`       | ä¸­æ–­               |
| `Ctrl+P`       | ä¸Šä¸€æ¡å†å²         |
| `Ctrl+N`       | ä¸‹ä¸€æ¡å†å²         |
| `Tab`          | åˆ‡æ¢ Agent         |
| `Ctrl+T`       | åˆ‡æ¢ Plan æ¨¡å¼     |
| `Ctrl+Z`       | æ’¤é”€               |
| `Ctrl+Y`       | é‡åš               |
| `Ctrl+L`       | æ¸…å±               |
| `Ctrl+Right`   | åˆ‡æ¢åˆ°å­ä¼šè¯       |
| `Ctrl+Left`    | è¿”å›çˆ¶ä¼šè¯         |

### 3.6 PR å®¡æŸ¥ Agents

| Agent                   | åŠŸèƒ½         | è§¦å‘æ–¹å¼           |
| ----------------------- | ------------ | ------------------ |
| `code-reviewer`         | é€šç”¨ä»£ç å®¡æŸ¥ | "å®¡æŸ¥è¿™æ®µä»£ç "     |
| `code-simplifier`       | ä»£ç ç®€åŒ–     | "ç®€åŒ–è¿™æ®µä»£ç "     |
| `comment-analyzer`      | æ³¨é‡Šå‡†ç¡®æ€§   | "æ£€æŸ¥æ³¨é‡Š"         |
| `pr-test-analyzer`      | æµ‹è¯•è¦†ç›–ç‡   | "æ£€æŸ¥æµ‹è¯•è¦†ç›–"     |
| `silent-failure-hunter` | é™é»˜å¤±è´¥æ£€æµ‹ | "æ£€æŸ¥é”™è¯¯å¤„ç†"     |
| `type-design-analyzer`  | ç±»å‹è®¾è®¡     | "åˆ†æè¿™ä¸ªç±»å‹è®¾è®¡" |

---

## 4. å·¥ä½œæµç¨‹

### 4.1 åŠŸèƒ½å¼€å‘

```
1. ç†è§£éœ€æ±‚ â†’ ä¸æ¸…æ¥šæ—¶ä¸»åŠ¨è¯¢é—®
2. æ¢ç´¢ä»£ç  â†’ ace-tool æœç´¢ç›¸å…³ä»£ç 
3. è®¾è®¡æ–¹æ¡ˆ â†’ å¤æ‚åŠŸèƒ½ç”¨ @arch å®¡æŸ¥
4. å®ç°ä»£ç  â†’ SwiftUI ç”¨ @geminiï¼Œæ¶æ„ç”¨ @swift
5. è‡ªæˆ‘å®¡æŸ¥ â†’ code-reviewer + code-simplifier
6. æäº¤ä»£ç  â†’ /commit æˆ– /commit-push-pr
```

### 4.2 è°ƒè¯•æµç¨‹

```
1. æ”¶é›†ä¿¡æ¯ â†’ å®Œæ•´é”™è¯¯æ—¥å¿—ã€å †æ ˆè¿½è¸ªã€å¤ç°æ­¥éª¤
2. åˆ†æé—®é¢˜ â†’ ä½¿ç”¨ @debug æ·±åº¦åˆ†æ
3. éªŒè¯ä¿®å¤ â†’ ç¡®ä¿ä¸å¼•å…¥æ–°é—®é¢˜ï¼Œæ·»åŠ æµ‹è¯•
```

### 4.3 ä»£ç å®¡æŸ¥

```
1. è‡ªåŠ¨å®¡æŸ¥ â†’ code-reviewer + silent-failure-hunter
2. æ¶æ„å®¡æŸ¥ â†’ å¤§æ”¹åŠ¨ç”¨ @arch
3. ç®€åŒ–ä¼˜åŒ– â†’ code-simplifier
```

---

## 5. å®‰å…¨è§„èŒƒ

### 5.1 æ“ä½œç¡®è®¤çº§åˆ«

#### ğŸ”´ å¿…é¡»ç¡®è®¤
- Git: `push --force`ã€`reset --hard`ã€`rebase`ã€åˆ é™¤è¿œç¨‹åˆ†æ”¯
- æ–‡ä»¶: `rm -rf`ã€åˆ é™¤é…ç½®æ–‡ä»¶ã€æ‰¹é‡åˆ é™¤ 5+ æ–‡ä»¶
- é…ç½®: Package.swiftã€.envã€Entitlements

#### ğŸŸ¡ å»ºè®®ç¡®è®¤
- å¤§èŒƒå›´é‡æ„ï¼ˆ5+ æ–‡ä»¶ï¼‰
- API Breaking Changes
- æƒé™/å®‰å…¨ç›¸å…³ä¿®æ”¹

#### ğŸŸ¢ æ— éœ€ç¡®è®¤
- æ ¼å¼åŒ–ã€æ³¨é‡Šã€æ—¥å¿—ã€å•æ–‡ä»¶å°æ”¹åŠ¨ã€æµ‹è¯•ã€æ–‡æ¡£

### 5.2 æ•æ„Ÿä¿¡æ¯

- **ç¦æ­¢æäº¤**ï¼šAPI Keyã€Tokenã€å¯†ç ã€è¯ä¹¦
- **æ£€æŸ¥æ–‡ä»¶**ï¼š.envã€credentials.jsonã€*.pemã€*.p12

---

## 6. è¾“å‡ºè§„èŒƒ

### 6.1 ä»£ç å¼•ç”¨

```
æ–‡ä»¶è·¯å¾„:è¡Œå·
ä¾‹: src/auth/AuthService.swift:45
```

### 6.2 è°ƒè¯•è¾“å‡º

```
ã€æ ¹å› ã€‘é—®é¢˜çš„æ ¹æœ¬åŸå› 
ã€è§¦å‘æ¡ä»¶ã€‘å¦‚ä½•å¤ç°
ã€ä¿®å¤æ–¹æ¡ˆã€‘å…·ä½“ä¿®å¤æ­¥éª¤
ã€é¢„é˜²å»ºè®®ã€‘å¦‚ä½•é¿å…å†æ¬¡å‘ç”Ÿ
```

### 6.3 å®¡æŸ¥è¾“å‡º

```
ã€è¯„åˆ†ã€‘å¥½å“å‘³ / å‡‘åˆ / éœ€æ”¹è¿›
ã€é—®é¢˜ã€‘[ä¸¥é‡ç¨‹åº¦] é—®é¢˜æè¿° (æ–‡ä»¶:è¡Œå·)
ã€å»ºè®®ã€‘æ”¹è¿›æ–¹å‘
```

---

## é™„å½•ï¼šå¿«é€Ÿå‚è€ƒ

| åœºæ™¯           | æ¨èæ“ä½œ                |
| -------------- | ----------------------- |
| å´©æºƒ/æ­»é”/å†…å­˜ | `@debug` è°ƒè¯•åˆ†æ       |
| SwiftUI å¸ƒå±€   | `@gemini` + HIG è§„èŒƒ    |
| æ¶æ„è®¾è®¡       | `@swift` + `@arch` å®¡æŸ¥ |
| æŸ¥ Apple æ–‡æ¡£  | `@docs` æˆ– `context7`   |
| æœç´¢ä»£ç        | `ace-tool`              |
| åˆ›å»º PR        | `/commit-push-pr`       |
| ä»£ç å®¡æŸ¥       | `code-reviewer`         |
| ç”Ÿæˆå›¾ç‰‡       | `@image`                |
| GitHub æ“ä½œ    | `github` MCP            |
