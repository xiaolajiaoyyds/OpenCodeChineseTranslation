# 更新日志

---

## [1.1.56-zh-v1.5] - 2026-02-11

### 🔧 修复

- **Bun 版本检查逻辑优化**
  - 自动从 `opencode-zh-CN/package.json` 读取 `packageManager` 字段获取版本要求
  - 版本比较从精确匹配改为 `>=` 语义化比较
  - 不再需要手动维护版本号，跟随上游自动适配

---

## [1.1.34-zh-v0.3] - 2026-01-23

### 🔄 同步更新

- 同步官方 OpenCode v1.1.34

### 🤖 自动同步功能

- **新增 GitHub Actions 自动同步**：`.github/workflows/auto-sync.yml`
  - 每天 8:00 和 15:00 (北京时间) 自动检测官方更新
  - 发现新版本自动同步、更新版本号、打 tag
  - 支持手动触发和强制更新选项
  - 打 tag 后自动触发 Release 构建

---

## [1.1.31-zh-v0.1] - 2026-01-22

### 🚀 自动修复功能

- **编译失败自动修复**：检测到版本问题时自动更新并重试编译
  - 自动检测导入路径被翻译、TypeScript 语法错误等问题
  - 自动执行修复流程：恢复源码 → 更新配置 → 重新汉化
  - 修复后自动重试编译，无需手动干预

### 🔧 版本号规范调整

- **新版本号格式**：`1.1.31-zh-v0.1`
  - `1.1.31` - 同步 OpenCode 官方版本号
  - `-zh` - 汉化版本标识
  - `-v0.1` - 汉化迭代版本（每次修复/更新递增）

### 🔧 改进

- 优化版本问题检测模式
- 添加自动更新提示信息
- 完善故障排除文档

---

## [1.1.31-zh] - 2026-01-22

### 界面优化

- **AI 总结合并**：AI 总结不再单独开框，合并到执行总结框内最后显示
- **输出顺序优化**：覆盖率报告 → 执行总结（含 AI 总结）→ 完成提示
- **模型信息对齐**：AI 总结中"指定模型"使用 L3 格式，与框内其他信息对齐

### 技术改进

- printPipelineSummary 改为 async 函数，支持 AI 总结的异步调用
- 新增 generateCoverageSummaryInline 方法，内联输出不创建独立框
- 修复 AI 总结最后一行与结束符混在一起的显示问题

---

## [1.1.30-zh] - 2026-01-22

### 界面优化

- **三层格式系统**：引入 L1/L2/L3 层级输出，统一所有界面元素
  - L1：主内容层（`│` + 2 空格）
  - L2：子步骤层（`│` + 2 空格 + `├─`）
  - L3：详情层（`│` + 2 空格 + `│` + 3 空格 + `●`）
- **部署信息优化**：部署步骤移至执行总结框内末尾统一显示
- **AI 总结对齐**：修复 AI 总结首行缩进，与后续换行行完美对齐
- **用户体验**：AI 语义质量检查添加可选确认，避免不必要的 API 消耗

### 技术改进

- deployer.js 添加 `silent` 参数支持静默模式
- build 和 deploy 步骤支持静默执行，结果统一在总结中展示
- 输出格式全面匹配 @clack/prompts 视觉风格

---

## [1.1.28-zh] - 2026-01-21

### CI/CD

- 新增 PR/分支 CI：提交规范校验、单测、版本一致性校验
- 新增 main/develop 分支构建工件流程
- 发布流程增加 tag 与配置版本一致性校验

### 安全

- 移除翻译模块中的默认 API Key 行为，未配置时不再发起请求

---

## [6.1] - 2026-01-18

### 文档

- 更新 README 文档，添加详细使用说明
- 添加截图：交互式菜单、覆盖率报告、质量检查
- 详细说明 Antigravity Tools API 反代配置
- 补充命令参考、项目结构、常见问题

### 改进

- 重命名截图文件为语义化名称
- 删除过时的 PowerShell 相关文档

---

## [6.0] - 2026-01-17

### 新增

- **AI 自动翻译**：集成到 `apply` 命令，自动检测并翻译新文本
- **增量翻译**：`opencodenpm apply --incremental`，仅翻译 git 变更文件
- **翻译质量检查**：`opencodenpm check --quality`
  - 本地语法检查（引号、花括号、标签匹配）
  - AI 语义审查（抽样 30 条）
  - 自动修复语法问题
- **交互式菜单优化**：分类展示，支持键盘导航
- **覆盖率报告**：显示翻译统计和 AI 智能总结
- **遗漏扫描**：检测未翻译的 UI 文本

### 改进

- 翻译格式统一为 `中文 (English)` 双语格式
- 语法检查支持 `{highlight}...{/highlight}` 标签检测
- 检查逻辑排除不完整代码片段的误报
- Node.js CLI 替代 PowerShell 脚本，跨平台支持

### 修复

- 修复 28 处翻译语法问题（花括号、标签不匹配）
- 修复菜单 stdin 事件监听冲突导致的退出问题

### 翻译统计

- 总计 605 条翻译
- 对话框：34 文件 / 186 条
- 组件：16 文件 / 212 条
- 路由：11 文件 / 149 条
- 通用：10 文件 / 54 条
- 上下文：2 文件 / 4 条
- 质量评分：100/100

---

## [5.x] - 2026-01

历史版本，由原作者 [1186258278](https://github.com/1186258278) 维护。

### 主要功能

- 模块化汉化配置（JSON 格式）
- PowerShell 管理脚本（Windows）
- 基础验证功能
- 一键汉化 + 部署

### 版本历史

- **5.2** - 修复汉化配置破坏代码的问题
- **5.1** - 添加语言包版本适配检测
- **5.0** - 优化文件标记速度
- **4.x** - 添加自动代理检测、交互式菜单
- **3.x** - 一键汉化功能
- **1.0** - 初始版本

---

## 链接

- [GitHub 仓库](https://github.com/xiaolajiaoyyds/OpenCodeChineseTranslation)
- [原作者仓库](https://github.com/1186258278/OpenCodeChineseTranslation)
- [OpenCode 官方](https://github.com/anomalyco/opencode)
